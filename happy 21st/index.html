<!doctype html>
<html lang="id">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday ‚Äî Untuk Regina Aulia</title>
  <style>
    :root{
      --bg1:#ffeef8;
      --bg2:#fff5fb;
      --accent:#ff9fc1;
      --muted:#8b5d6a;
      --card:#ffffffcc;
      --radius:18px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{
      height:100%;
      margin:0;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      color:var(--muted);
      overflow-x:hidden;
    }
    .fade{opacity:0;transition:opacity 1s ease;}
    .fade.active{opacity:1;}

h1 span.gift-emoji {
  display: inline-block;
  animation: pulse 1.8s infinite ease-in-out;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.8; }
}


    /* Login */
    #loginPage{
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      height:100vh;text-align:center; animation: fadeIn 1.5s ease-out;
    }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

    #loginPage h1{color:#6b2b3a;margin-bottom:12px;}
    #loginPage p{color:#8b5d6a;margin-top:0;}
    input{
      padding:10px 14px;border-radius:12px;border:1px solid rgba(150,80,110,0.2);
      margin:6px;font-size:15px;
    }
    button{
      background:var(--accent);color:#fff;padding:10px 18px;border-radius:12px;
      border:0;cursor:pointer;font-weight:600;
      box-shadow:0 6px 18px rgba(255,160,190,0.15);margin-top:8px;
    }
    .error{color:#b33;margin-top:8px;}

    /* Main container */
    .wrap{display:none;max-width:980px;margin:32px auto;padding:28px;border-radius:26px;
      background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.55));
      box-shadow:0 10px 30px rgba(200,120,160,0.12)
    }
    header{display:flex;gap:16px;align-items:center}
    .avatar{width:86px;height:86px;border-radius:16px;overflow:hidden;flex:0 0 86px}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    h1{font-size:28px;margin:0;color:#6b2b3a}
    p.lead{margin:6px 0 0;color:#7f4f65}

    /* gallery */
    .gallery{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(2,1fr);gap:16px;margin-top:22px}
    .photo{
      background:#fff;border-radius:12px;overflow:hidden;position:relative;cursor:pointer;
      box-shadow:0 4px 10px rgba(0,0,0,0.1);aspect-ratio:4/3;
    }
.photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transition: transform .4s ease, filter .6s ease;
}

.photo.revealed img {
  filter: brightness(1); /* terang saat sudah dibuka */
}
.cover-heart {
  position: absolute;
  inset: 0;
  background: #ffc0cb url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23ff4f91" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') center/60px no-repeat;
  opacity: 1;
  transition: opacity 0.8s ease;
  cursor: pointer;
}

    /* Tambahkan efek fade-out */
.photo.revealed .cover-heart { opacity: 0; transition: opacity 0.8s ease; }


    /* modal */
    .modal{position:fixed;inset:0;background:rgba(11,6,8,0.5);
      display:none;align-items:center;justify-content:center;padding:24px;z-index:10;
    }
    .modal.active{display:flex}
.modal .content {
  position: relative;
  background: #fdf6f0;
  border-radius: 20px;
  padding: 18px;
  box-shadow:
    0 10px 40px rgba(80, 50, 40, 0.3),
    inset 0 0 12px rgba(255, 255, 255, 0.4);
  border: 1px solid rgba(120, 90, 70, 0.2);
  overflow: hidden;
  animation: vintagePop 0.5s ease;
}

    .modal img {
  width: 95%;
  height: auto;
  border-radius: 8px;
  border: 8px solid #fff;
  box-shadow: 0 4px 16px rgba(80, 50, 40, 0.2);
  filter: sepia(0.25) contrast(1.05) brightness(0.98) saturate(0.9);
  transition: all 0.4s ease;
}

.modal img:hover {
  filter: sepia(0.35) contrast(1.1) brightness(1);
  transform: scale(1.01);
}
.modal .content::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(145deg, rgba(255, 240, 220, 0.4), rgba(255, 230, 210, 0.3));
  mix-blend-mode: overlay;
  pointer-events: none;
}
.modal .content::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url('https://www.transparenttextures.com/patterns/noise-pattern-with-subtle-cross-lines.png');
  opacity: 0.25;
  mix-blend-mode: multiply;
  pointer-events: none;
}

@keyframes vintagePop {
  0% {
    transform: scale(0.9) translateY(10px);
    opacity: 0;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

    .close {
  background: #fff8f0;
  border: 1px solid rgba(120, 90, 70, 0.3);
  color: #5a3b2c;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  font-size: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.3s ease;
}
.close:hover {
  background: #f0e0d0;
}


    /* message */
    .message{margin-top:26px;padding:18px;border-radius:14px;
      background:linear-gradient(90deg, rgba(255,255,255,0.6), rgba(255,245,250,0.6));
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.6)
    }
    .message h2{margin:0 0 8px;color:#6b2b3a}
    .message p {
  font-family: 'pacifico', cursive;
  font-size: 18px;
  line-height: 1.6;
  color: #6b2b3a;
  letter-spacing: 0.5px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

    /* video */
    .video-area{margin-top:22px;}
    .video-card{background:var(--card);padding:14px;border-radius:14px}
    video{width:100%;border-radius:10px;display:block}

    footer{margin-top:18px;text-align:center;color:#8b5d6a;font-size:14px}
    .nav-buttons{text-align:center;margin-top:24px;}
    .nav-buttons button{margin:0 8px;padding:8px 18px;}

    .fullscreen-photo {
  width: 100%;
  height: 100vh;
  object-fit: cover;
  display: block;
  transition: transform 1.2s ease;
}

.overlay-text {
  position: absolute;
  bottom: 24px;
  width: 100%;
  text-align: center;
  font-size: 24px;
  color: #fff;
  text-shadow: 0 0 12px rgba(0,0,0,0.5);
  font-weight: 600;
}

.puzzle-board {
  width: 360px;
  height: 270px;
  margin: 20px auto;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: 4px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 14px rgba(0,0,0,0.15);
}

.puzzle-tile {
  background-image: url('images/foto1.jpg'); /* ganti sesuai gambar puzzle */
  background-size: 400% 300%; /* menyesuaikan 4 kolom x 3 baris */
  cursor: grab;
  transition: transform 0.2s ease;
  border-radius: 4px;
}
.puzzle-tile.dragging {
  opacity: 0.6;
  transform: scale(1.1);
}
.puzzle-msg {
  margin-top: 14px;
  font-weight: 600;
  color: #6b2b3a;
  font-size: 16px;
}

.puzzle-board.completed {
  position: relative;
}

.full-image {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 1s ease;
  border-radius: 12px;
  overflow: hidden;
}

.full-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
}

.full-image.visible {
  opacity: 1;
}


.romantic-popup {
  position: fixed;
  inset: 0;
  background: rgba(255, 220, 235, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity .4s ease;
  z-index: 99;
}

.romantic-popup.active {
  opacity: 1;
}

.romantic-content {
  background: linear-gradient(135deg, #fff, #ffe6f2);
  padding: 28px 22px;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(200, 80, 140, 0.25);
  text-align: center;
  max-width: 360px;
  animation: pop 0.5s ease;
}

.romantic-content h3 {
  color: #d04c7e;
  margin-top: 0;
  font-family: 'Dancing Script', cursive;
  font-size: 28px;
}

.romantic-content p {
  color: #6b2b3a;
  line-height: 1.6;
  font-size: 16px;
  margin: 12px 0 18px;
}

.romantic-content button {
  background: #ff9fc1;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 10px 20px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(255, 120, 180, 0.2);
  transition: transform .2s ease, background .3s ease;
}

.romantic-content button:hover {
  background: #ff86b2;
  transform: scale(1.05);
}

@keyframes pop {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}


    @media (max-width: 480px) {
  .gallery {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(4, auto);
    gap: 12px;
  }
  .photo { aspect-ratio: 1; } /* foto kotak agar lebih proporsional */
}
.modal .content {
    max-width: 420px;
  }


.message p { font-size: 14px; line-height: 1.4; }
  .message { padding: 12px; }

  .nav-buttons button { padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  <!-- Login -->
  <div id="loginPage" class="fade active">
    <h1>Kado dari Rakai Oka <span class="gift-emoji">üéÅ</span></h1>
    <p>Masukkan namamu dan password nya</p>
    <input type="text" id="nameInput" placeholder="Nama kamu" />
    <input type="password" id="passInput" placeholder="Password" />
    <button id="loginBtn">Masuk</button>
    <div id="errorMsg" class="error"></div>
  </div>

  <!-- Main content -->
  <div class="wrap fade" id="mainContent">
    <header>
      <div>
        <h1>Happy 21st Birthday, Regina Aulia üå∏</h1>
      </div>
    </header>

    <div id="pagesContainer"></div>

    <div class="nav-buttons">
      <button id="prevBtn">Prev</button>
      <button id="nextBtn">Next</button>
    </div>

    <footer>
      Made with ‚ù§Ô∏è ‚Äî Untukmu, Regina.
    </footer>
  </div>

  <!-- Audio -->
  <audio id="bgAudio" preload="auto" loop>
    <source src="audio/Bentang Jarak Asmara.mp3" type="audio/mpeg">
  </audio>

  <!-- Modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="content">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <strong id="modalTitle">Foto</strong>
        <button class="close" id="closeModal">‚úï</button>
      </div>
      <img id="modalImg" src="" alt="">
    </div>
  </div>

  <script>
    const loginBtn=document.getElementById('loginBtn');
    const nameInput=document.getElementById('nameInput');
    const passInput=document.getElementById('passInput');
    const errorMsg=document.getElementById('errorMsg');
    const loginPage=document.getElementById('loginPage');
    const mainContent=document.getElementById('mainContent');
    const audio=document.getElementById('bgAudio');

    let currentPage=1;
    const totalPages=6;
    const pagesContainer=document.getElementById('pagesContainer');
    const prevBtn=document.getElementById('prevBtn');
    const nextBtn=document.getElementById('nextBtn');

    loginBtn.addEventListener('click',()=>{
      const name=nameInput.value.trim();
      const pass=passInput.value.trim();
      if(name==='1'&&pass==='1'){
        loginPage.style.display='none';
        mainContent.style.display='block';
        setTimeout(()=>mainContent.classList.add('active'),100);
        audio.volume = 0;
audio.play().catch(()=>{});
let fadeIn = setInterval(()=>{
  if(audio.volume < 1){
    audio.volume = Math.min(audio.volume + 0.02, 1); // naik pelan
  }else{
    clearInterval(fadeIn);
  }
}, 100); // 0.02 setiap 0.1 detik = ~5 detik fade-in

        loadPages();
      }else{
        errorMsg.textContent='Nama atau password salah üòÖ';
      }
    });

    function loadPages(){
      let html='';

      // page 1‚Äì3: foto (8 per page)
      for(let p=1;p<=3;p++){
        const start=(p-1)*8+1;
        const end=start+7;
        html+=`<section class="page fade" id="page${p}" ${p===1?'style="display:block"':'style="display:none"'}>`;
        html+=`<div class="gallery">`;
        for(let i=start;i<=end;i++){
          html+=`<div class="photo" data-index="${i}" data-revealed="false">
            <div class="cover-heart"></div>
            <img src="images/rere${i}.jpg" alt="Foto ${i}">
          </div>`;
        }
        html+=`</div></section>`;
      }

      // page 4: teks ucapan
      html+=`<section class="page fade" id="page4" style="display:none">
        <div class="message">
          <h2>Untukmu di ulang tahunmu yang ke-21 ‚Äî</h2>
          <p>Sayangku, setiap langkah bersamamu terasa seperti lagu yang indah ‚Äî ada nada rindu, bait tawa, dan chorus yang selalu membuatku kembali. Di ulang tahunmu yang ke-21 ini, aku ingin kamu tahu bahwa kamu semakin berarti, semakin dewasa, dan semakin mempesona di mataku. Aku bangga padamu, dan aku akan selalu berdoa agar semua mimpimu menjadi nyata. Terima kasih telah menjadi dirimu yang hangat dan tulus. Selamat ulang tahun, cintaku. Aku mencintaimu, hari ini dan selalu.</p>
        </div>
      </section>`;

      // page 5: video
      html+=`<section class="page fade" id="page5" style="display:none">
        <div class="video-area">
          <div class="video-card">
            <h3>Video ucapan dari aku</h3>
            <video id="videoMsg" controls preload="metadata" poster="images/photo24.jpg">
              <source src="video/ucapan.mp4" type="video/mp4">
            </video>
          </div>
        </div>
      </section>`;

// page 6: mini game puzzle
html+=`<section class="page fade" id="page6" style="display:none;text-align:center;">
  <h2>Mini Game: Susun Puzzle üíñ</h2>

  <div id="puzzleBoard" class="puzzle-board"></div>
  <div id="puzzleMessage" class="puzzle-msg"></div>
</section>`;



      pagesContainer.innerHTML=html;

      // ‚úÖ langsung tampilkan page pertama
      showPage(1);
    }

    function showPage(n){
      const pages=document.querySelectorAll('.page');
      pages.forEach((pg,i)=>{
        if(i===n-1){pg.style.display='block';setTimeout(()=>pg.classList.add('active'),50);}
        else{pg.style.display='none';pg.classList.remove('active');}
      });
    }

    nextBtn.addEventListener('click',()=>{
      if(currentPage<totalPages){currentPage++;showPage(currentPage);}
    });
    prevBtn.addEventListener('click',()=>{
      if(currentPage>1){currentPage--;showPage(currentPage);}
    });

function initPuzzle() {
  const board = document.getElementById('puzzleBoard');
  if (!board) return;

  let tiles = [];
  const total = 12;
  for (let i = 0; i < total; i++) {
    const tile = document.createElement('div');
    tile.classList.add('puzzle-tile');
    tile.dataset.index = i;

    const x = i % 4;
    const y = Math.floor(i / 4);
    tile.style.backgroundPosition = `${-x * 100}% ${-y * 100}%`;
    tiles.push(tile);
  }

  // acak posisi
  tiles.sort(() => Math.random() - 0.5);
  tiles.forEach(t => board.appendChild(t));

  let draggedTile = null;
  let touchStartTile = null;

  // Desktop drag
  tiles.forEach(tile => {
    tile.draggable = true;
    tile.addEventListener('dragstart', () => draggedTile = tile);
    tile.addEventListener('dragover', e => e.preventDefault());
    tile.addEventListener('drop', e => {
      e.preventDefault();
      swapTiles(draggedTile, tile);
    });
  });

  // Mobile touch (swap on tap-tap)
  tiles.forEach(tile => {
    tile.addEventListener('touchstart', e => {
      e.preventDefault();
      if (!touchStartTile) {
        tile.classList.add('dragging');
        touchStartTile = tile;
      } else {
        tile.classList.remove('dragging');
        swapTiles(touchStartTile, tile);
        touchStartTile = null;
      }
    });
  });

  function swapTiles(a, b) {
    if (!a || !b || a === b) return;
    const parent = a.parentNode;
    const aNext = a.nextSibling;
    const bNext = b.nextSibling;
    parent.insertBefore(a, bNext);
    parent.insertBefore(b, aNext);
    a.classList.remove('dragging');
    b.classList.remove('dragging');
    checkWin();
  }

  function checkWin() {
  const tilesNow = [...board.children];
  const correct = tilesNow.every((t, i) => Number(t.dataset.index) === i);
  if (correct) {
    showFullImage(); // tampilkan gambar utuh
    setTimeout(showRomanticPopup, 1500); // muncul popup romantis setelah gambar tampil
  }
}
}

function showFullImage() {
  const board = document.getElementById('puzzleBoard');
  board.classList.add('completed');

  // buat elemen gambar utuh
  const full = document.createElement('div');
  full.className = 'full-image';
  full.innerHTML = `<img src="images/foto1.jpg" alt="Puzzle Utuh">`;

  // tambahkan ke papan puzzle
  board.appendChild(full);

  // animasi fade-in lembut
  setTimeout(() => full.classList.add('visible'), 200);
}


function showRomanticPopup() {
  const popup = document.createElement('div');
  popup.className = 'romantic-popup';
  popup.innerHTML = `
    <div class="romantic-content">
      <h3>üíû Selamat Sayang üíû</h3>
      <p>Kamu berhasil menyatukan potongan puzzle ini...<br>
      Seperti bagaimana aku dan kamu ‚Äî dua hati yang akhirnya menjadi satu utuh. üíñ<br><br>
      Terima kasih sudah bermain dan selalu menjadi bagian paling indah dalam hidupku.</p>
      <button id="closePopup">üíã Tutup</button>
    </div>
  `;
  document.body.appendChild(popup);
  setTimeout(() => popup.classList.add('active'), 100);
  document.getElementById('closePopup').addEventListener('click', () => {
    popup.classList.remove('active');
    setTimeout(() => popup.remove(), 400);
  });
}

// jalankan puzzle saat page 6 muncul
function showPage(n){
  const pages=document.querySelectorAll('.page');
  pages.forEach((pg,i)=>{
    if(i===n-1){
      pg.style.display='block';
      setTimeout(()=>pg.classList.add('active'),50);
      if (pg.id === 'page6') setTimeout(initPuzzle,200);
    } else {
      pg.style.display='none';
      pg.classList.remove('active');
    }
  });
}


    // modal logic
    const modal=document.getElementById('modal');
    const modalImg=document.getElementById('modalImg');
    const modalTitle=document.getElementById('modalTitle');
    const closeModal=document.getElementById('closeModal');

    document.addEventListener('click', e => {
  const photo = e.target.closest('.photo');
  if (photo) {
    const heart = photo.querySelector('.cover-heart');
    const revealed = photo.classList.contains('revealed');
    const idx = photo.dataset.index;

    // pertama kali diklik ‚Üí fade out
    if (!revealed) {
      heart.style.opacity = '0';
      setTimeout(() => photo.classList.add('revealed'), 800);
    } 
    // sudah terbuka ‚Üí buka modal
    else {
      modalImg.src = `images/rere${idx}.jpg`;
      modalTitle.textContent = `Foto ${idx}`;
      modal.classList.add('active');
    }
  }
});

    closeModal.addEventListener('click',()=>{modal.classList.remove('active');});
    modal.addEventListener('click',e=>{if(e.target===modal){modal.classList.remove('active');}});

    // kontrol musik ketika video diputar
document.addEventListener('play', function(e) {
  if (e.target.tagName === 'VIDEO') {
    // fade out audio
    let fadeOut = setInterval(() => {
      if (audio.volume > 0.05) {
        audio.volume = Math.max(audio.volume - 0.05, 0);
      } else {
        audio.pause();
        clearInterval(fadeOut);
      }
    }, 100);
  }
}, true);

document.addEventListener('ended', function(e) {
  if (e.target.tagName === 'VIDEO') {
    // fade in audio kembali
    audio.play();
    let fadeIn = setInterval(() => {
      if (audio.volume < 1) {
        audio.volume = Math.min(audio.volume + 0.05, 1);
      } else {
        clearInterval(fadeIn);
      }
    }, 100);
  }
}, true);

  </script>
</body>
</html>
